<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¶œì„ë¥  ê³„ì‚°ê¸° (ì›”ë³„ ì„ íƒ + ë²„íŠ¼ ì…ë ¥)</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e8f6ff;
      color: #333;
      padding: 30px;
      max-width: 750px;
      margin: auto;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 165, 255, 0.2);
    }

    h2 {
      text-align: center;
      color: #007acc;
      margin-bottom: 20px;
    }

    label {
      font-weight: bold;
      color: #005b9f;
    }

    select, button.main-btn {
      padding: 8px 12px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      margin: 10px 0;
      background-color: #aee6ff;
      color: #003d66;
      transition: 0.2s;
    }

    button.main-btn:hover {
      background-color: #87d4f7;
      cursor: pointer;
    }

    input {
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #aaa;
      width: 50px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 5px 0;
    }

    .input-btn {
      padding: 3px 6px;
      font-size: 13px;
      border: none;
      border-radius: 5px;
      background-color: #d6f1ff;
      color: #005b9f;
      cursor: pointer;
    }

    .input-btn:hover {
      background-color: #b3eaff;
    }

    #formArea {
      background-color: #ffffffd6;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      margin-top: 20px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
    }

    th, td {
      padding: 10px;
      border: 1px solid #b3e0ff;
      text-align: center;
    }

    th {
      background-color: #d6f1ff;
      color: #004d80;
    }

    td {
      background-color: #f8fcff;
    }

    #resultArea {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>ğŸŒ¤ï¸ ì›”ë³„ ì¶œì„ë¥  ê³„ì‚°ê¸°</h2>

  <label>âœ… ì›” ì„ íƒ: 
    <select id="monthSelect">
      <option value="6">6ì›”</option>
      <option value="7">7ì›”</option>
      <option value="8">8ì›”</option>
      <option value="9">9ì›”</option>
      <option value="10">10ì›”</option>
      <option value="11">11ì›”</option>
      <option value="12">12ì›”</option>
    </select>
  </label>

  <button class="main-btn" onclick="generateDates()">ğŸ“… ë‚ ì§œ ìƒì„±</button>
  <form id="formArea"></form>
  <button class="main-btn" onclick="calculateRate()">âœ… ì¶œì„ë¥  ê³„ì‚°</button>

  <div id="resultArea"></div>

  <script>
    <!-- ìœ„ ì½”ë“œì™€ ë™ì¼í•œ ë””ìì¸ ìœ ì§€ -->
  const baseStart = new Date('2025-06-16');
  const baseEnd = new Date('2025-12-23');

  function isWeekday(date) {
    const day = date.getDay();
    return day !== 0 && day !== 6;
  }

  function generateDates() {
    const form = document.getElementById('formArea');
    form.innerHTML = '';
    const month = parseInt(document.getElementById('monthSelect').value);

    let start = new Date(`2025-${String(month).padStart(2, '0')}-01`);
    let end = new Date(`2025-${String(month + 1).padStart(2, '0')}-01`);
    end.setDate(end.getDate() - 1); // ê·¸ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ 

    if (start < baseStart) start = baseStart;
    if (end > baseEnd) end = baseEnd;

    let date = new Date(start);
    while (date <= end) {
      if (isWeekday(date)) {
        const dateStr = date.toISOString().slice(0, 10);
        form.innerHTML += `
          <div class="row">
            <span>${dateStr}:</span>
            <input type="text" maxlength="1" id="${dateStr}" placeholder="A/X/L/E/V">
            <button type="button" class="input-btn" onclick="setValue('${dateStr}', 'A')">ì¶œì„</button>
            <button type="button" class="input-btn" onclick="setValue('${dateStr}', 'X')">ê²°ì„</button>
            <button type="button" class="input-btn" onclick="setValue('${dateStr}', 'L')">ì§€ê°</button>
            <button type="button" class="input-btn" onclick="setValue('${dateStr}', 'E')">ì¡°í‡´</button>
            <button type="button" class="input-btn" onclick="setValue('${dateStr}', 'V')">íœ´ê°€</button>
          </div>
        `;
      }
      date.setDate(date.getDate() + 1);
    }
  }

  function setValue(id, value) {
    document.getElementById(id).value = value;
  }

  function calculateRate() {
    const month = parseInt(document.getElementById('monthSelect').value);
    let start = new Date(`2025-${String(month).padStart(2, '0')}-01`);
    let end = new Date(`2025-${String(month + 1).padStart(2, '0')}-01`);
    end.setDate(end.getDate() - 1);

    if (start < baseStart) start = baseStart;
    if (end > baseEnd) end = baseEnd;

    let total = 0;
    let attended = 0;

    let date = new Date(start);
    while (date <= end) {
      if (isWeekday(date)) {
        const dateStr = date.toISOString().slice(0, 10);
        const val = (document.getElementById(dateStr)?.value || '').toUpperCase();
        let penalty = 1;

        if (val === 'A') penalty = 0;
        else if (val === 'X') penalty = 1;
        else if (val === 'L' || val === 'E') penalty = 0.5;
        else if (val === 'V') penalty = 0; // íœ´ê°€ëŠ” ì¶œì„ë¥ ì— ì˜í–¥ ì—†ìŒ

        if (val !== 'V') {
          total += 1;
          attended += (1 - penalty);
        }
      }
      date.setDate(date.getDate() + 1);
    }

    const rate = total === 0 ? 0 : (attended / total) * 100;
    const passed = rate >= 80 ? 'âœ…' : 'âŒ';

    document.getElementById('resultArea').innerHTML = `
      <table>
        <tr><th>ì›”</th><th>ì¶œì„ì¼ìˆ˜</th><th>ì´ ìˆ˜ì—…ì¼ìˆ˜</th><th>ì¶œì„ë¥ </th><th>ë‹¬ì„±</th></tr>
        <tr><td>${month}ì›”</td><td>${attended.toFixed(1)}</td><td>${total}</td><td>${rate.toFixed(2)}%</td><td>${passed}</td></tr>
      </table>
    `;
  }
  </script>
</body>
</html>
