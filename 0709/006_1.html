<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달력 생성기</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div id="calendar"></div>
    <script>

		const now = new Date();
		const ryear = now.getFullYear();
		const rmonth = now.getMonth() + 1;
        
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		
		const chy = urlParams.get('year')?urlParams.get('year'):ryear;
		const chm = urlParams.get('month')?urlParams.get('month'):rmonth;
		
		generateCalendar(chy,chm);
		
		function generateCalendar(sety,setm) {
            
			const monthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; // 각 월의 일 수
            
			const year = sety;
			const month = setm - 1;
            let daysInMonth = monthDays[month];

            // 윤년 체크 (2월)
            if (month === 1 && ((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0))) {
                daysInMonth = 29; // 윤년이면 29일
            }

            const firstDay = new Date(year, month, 1);
            const firstDayOfWeek = firstDay.getDay(); // 첫 날의 요일

            // 날짜 배열 생성
            let daysArray = [];
            for (let day = 1; day <= daysInMonth; day++) {
                daysArray.push(day);
            }
			
			let calendar = `<h1>${year}년 ${month+1}월 달력</h1>`;
			
            calendar += '<table><tr><th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th></tr>';
            calendar += '<tr>';

            // 첫 주의 빈 칸 추가
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendar += '<td></td>'; // 빈 칸
            }

            // 날짜 추가
            for (let i = 0; i < daysArray.length; i++) {
                calendar += `<td>${daysArray[i]}</td>`;
                if ((i + firstDayOfWeek + 1) % 7 === 0) {
                    calendar += '</tr><tr>'; // 주가 끝나면 줄바꿈
                }
            }

            // 마지막 주의 빈 칸 추가
            const lastDayOfWeek = (daysArray.length + firstDayOfWeek) % 7;
            for (let i = lastDayOfWeek; i < 7 && lastDayOfWeek !== 0; i++) {
                calendar += '<td></td>'; // 빈 칸
            }

            calendar += '</tr></table>';
            document.getElementById('calendar').innerHTML = calendar;
        }

        
    </script>
</body>
</html>